# 安装

## 环境部署-php7安装

### 1、一键安装包方式

简单粗暴适合快速安装，前期自己容易编译错误的时候，直接按照教程快速安装，可以用这种，下面是地址
https://lnmp.org/install.html 

### 2、编译安装

大体步骤：
   解压
   configure  
   make
   make install
  
生产环境下，自己掌握如何编译，并且安装扩展

- 1、首先通过wget命令下载到指定文件

    Wget  http://cn2.php.net/distributions/php-7.2.15.tar.gz

- 2、通过tar命令解压
      tar -zxf    

- 3、进入目录利用configure 生成安装文件
在安装包下面一般有个configure， 是用来生成 Makefile，为下一步的编译做准备，你可以通过在 configure 后加上参数来对安装进行控制，具体可以通过configure  --help 查看相应的命令，这里只指定了php目录跟配置文件目录，开放了其中一部分扩展

```bash  
      ./configure --prefix=/usr/local/php 
        \--prefix=/usr/local/php \--with-config-file-path=/usr/local/php/etc
        \-with-libxml-dir=/usr   
        \--with-mhash \--with-openssl 
        \--with-mysqli=shared,mysqlnd \--with-pdo-mysql=shared,mysqlnd 
        \--with-zlib 
        \--enable-zip 
        \--enable-inline-optimization 
        \--disable-debug 
        \--disable-rpath 
        \--enable-shared 
        \--enable-xml 
        \--enable-bcmath 
        \--enable-shmop 
        \--enable-sysvsem 
        \--enable-mbregex
        \--enable-mbstring 
        \--enable-pcntl 
        \--enable-sockets 
        \--without-pear 
        \--with-gettext 
        \--enable-session 
```   
  
    
- 4、编译前检查
    
    想要编译必须要安装相应的依赖扩展库可以提前的下载这里使用yum来进行扩展安装，一般需要以下几个扩展支持，否则会出现错误

    yum -y  install  gcc  gcc-c++ libxml2-devel m4 autoconf pcre-devel make cmake bison openssl openssl-devel

- 5、正式安装 make && make install 
    
- 6、CentOS下将php和mysql命令加入到环境变量中

    开发过程中、需要使用到php命令执行程序、但是php命令没有在全局命令中；每次执行都需要加上全路径特别麻烦，把php命令添加到全局变量中，以后每次只用输入php可以了

    在centos7.2当中就可以使用下面的方式进行添加
    
    Vim /etc/profile文件
    
    ```cmd
        pathmunge /usr/local/php/bin
    ```    

    然后执行source /etc/profile 让当前的配置生效

- 7、最后配置文件拷贝到指定的目录

```cmd
      php -i | grep Configuration 查询配置文件目录
```

  将源码当中的配置文件指定到相应的目录
```cmd
      cp php.ini-development  /usr/local/php/etc/php.ini
```


- 8、扩展安装示例、通过yum安装依赖，然后在ext目录安装,同样的编译方式，比如curl的安装
```cmd
      yum install  libcurl-devel  
```

### swoole源码编译安装

Swoole安装方式跟php安装方式是一样的，下载解压、编译
```cmd
   wget  https://pecl.php.net/get/swoole-4.2.13.tgz
   cd swoole-src
   phpize
   ./configure
   make && make install
```


